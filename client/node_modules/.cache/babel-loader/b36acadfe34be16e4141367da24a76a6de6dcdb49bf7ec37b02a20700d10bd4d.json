{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\hoinlee\\\\Desktop\\\\HOIN\\\\codestates\\\\main-project\\\\seb43_main_001\\\\client\\\\src\\\\components\\\\User\\\\CommentItem.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport * as S from './CommentItem.style';\nimport { usePatchUserComment } from '../../hooks/usePatchUserComment';\nimport { useDeleteComment } from '../../hooks/useDeleteComment';\nimport { useRouter } from '../../hooks/useRouter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommentItem = _ref => {\n  _s();\n  let {\n    data,\n    path\n  } = _ref;\n  const {\n    routeTo\n  } = useRouter();\n  const [onEdit, setOnEdit] = useState(false);\n  const CommentRef = useRef(null);\n  const [editText, setEditText] = useState(data.content);\n  const {\n    handlePatchUserComment\n  } = usePatchUserComment(data.userId, data.portfolioId);\n  const {\n    handlerDeleteUserComment\n  } = useDeleteComment(data.userId, data.portfolioId);\n  const date = `${data.createdAt[0]}. ${data.createdAt[1]}. ${data.createdAt[2]}`;\n  const onChangeHandler = e => {\n    setEditText(e.currentTarget.value);\n  };\n  const onSubmitHandler = async e => {\n    e.preventDefault();\n    handlePatchUserComment({\n      commentId: data.userCommentId ? data.userCommentId : data.portfolioCommentId,\n      content: editText,\n      userId: data.userId,\n      pathId: data.writerId ? data.writerId : data.portfolioId,\n      path\n    });\n    setOnEdit(false);\n  };\n  const deleteHandler = async () => {\n    handlerDeleteUserComment({\n      commentId: data.userCommentId ? data.userCommentId : data.portfolioCommentId,\n      path\n    });\n  };\n  const onClickHandler = () => {\n    if (path === 'usercomments') {\n      console.log('?');\n      routeTo(`/User/${data.userId}`);\n    } else {\n      routeTo(`/Detail/${data.portfolioId}`);\n    }\n  };\n  // ! : 로그인한 유저 === 페이지 유저 : 삭제 버튼 보여야 함\n  // ! : 로그인한 유저 === 작성자 : 삭제 & 수정 버튼 보여야 함\n  // ! : Auth 데이터가 어떻게 도착하는지 보고 반영하기\n  return /*#__PURE__*/_jsxDEV(S.CommentItem, {\n    children: [/*#__PURE__*/_jsxDEV(S.DelBtn, {\n      onClick: deleteHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), !onEdit && /*#__PURE__*/_jsxDEV(S.EditBtn, {\n      onClick: () => setOnEdit(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 19\n    }, this), onEdit && /*#__PURE__*/_jsxDEV(S.SubmitBtn, {\n      onClick: onSubmitHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 18\n    }, this), onEdit ? /*#__PURE__*/_jsxDEV(\"form\", {\n      children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: CommentRef,\n        value: editText,\n        onChange: onChangeHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: editText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(S.LinkIcon, {\n      onClick: onClickHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(S.CommentUser, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: date\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.ImgBox, {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: data.userProfileImg || data.writerProfileImg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: data.writerName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(CommentItem, \"FUIRA5//u4841k/gX+ZIXWmm6Xc=\", false, function () {\n  return [useRouter, usePatchUserComment, useDeleteComment];\n});\n_c = CommentItem;\nexport default CommentItem;\nvar _c;\n$RefreshReg$(_c, \"CommentItem\");","map":{"version":3,"names":["React","useRef","useState","S","usePatchUserComment","useDeleteComment","useRouter","jsxDEV","_jsxDEV","CommentItem","_ref","_s","data","path","routeTo","onEdit","setOnEdit","CommentRef","editText","setEditText","content","handlePatchUserComment","userId","portfolioId","handlerDeleteUserComment","date","createdAt","onChangeHandler","e","currentTarget","value","onSubmitHandler","preventDefault","commentId","userCommentId","portfolioCommentId","pathId","writerId","deleteHandler","onClickHandler","console","log","children","DelBtn","onClick","fileName","_jsxFileName","lineNumber","columnNumber","EditBtn","SubmitBtn","ref","onChange","LinkIcon","CommentUser","ImgBox","src","userProfileImg","writerProfileImg","writerName","_c","$RefreshReg$"],"sources":["D:/Users/hoinlee/Desktop/HOIN/codestates/main-project/seb43_main_001/client/src/components/User/CommentItem.tsx"],"sourcesContent":["import React, { FormEvent, useRef, useState } from 'react';\r\nimport * as S from './CommentItem.style';\r\nimport { usePatchUserComment } from '../../hooks/usePatchUserComment';\r\nimport { useDeleteComment } from '../../hooks/useDeleteComment';\r\nimport { GetUserComment } from '../../types';\r\nimport { useRouter } from '../../hooks/useRouter';\r\n\r\ntype CommentItemProps = {\r\n  data: GetUserComment;\r\n  path: string;\r\n};\r\n\r\nconst CommentItem: React.FC<CommentItemProps> = ({ data, path }) => {\r\n  const { routeTo } = useRouter();\r\n  const [onEdit, setOnEdit] = useState<boolean>(false);\r\n  const CommentRef = useRef<HTMLTextAreaElement>(null);\r\n  const [editText, setEditText] = useState<string>(data.content);\r\n  const { handlePatchUserComment } = usePatchUserComment(data.userId, data.portfolioId!);\r\n  const { handlerDeleteUserComment } = useDeleteComment(data.userId, data.portfolioId!);\r\n\r\n  const date = `${data.createdAt[0]}. ${data.createdAt[1]}. ${data.createdAt[2]}`;\r\n  const onChangeHandler = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setEditText(e.currentTarget.value);\r\n  };\r\n  const onSubmitHandler = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    handlePatchUserComment({\r\n      commentId: data.userCommentId ? data.userCommentId : data.portfolioCommentId!,\r\n      content: editText,\r\n      userId: data.userId,\r\n      pathId: data.writerId ? data.writerId : data.portfolioId!,\r\n      path,\r\n    });\r\n    setOnEdit(false);\r\n  };\r\n  const deleteHandler = async () => {\r\n    handlerDeleteUserComment({\r\n      commentId: data.userCommentId ? data.userCommentId : data.portfolioCommentId!,\r\n      path,\r\n    });\r\n  };\r\n  const onClickHandler = () => {\r\n    if (path === 'usercomments') {\r\n      console.log('?');\r\n      routeTo(`/User/${data.userId}`);\r\n    } else {\r\n      routeTo(`/Detail/${data.portfolioId}`);\r\n    }\r\n  };\r\n  // ! : 로그인한 유저 === 페이지 유저 : 삭제 버튼 보여야 함\r\n  // ! : 로그인한 유저 === 작성자 : 삭제 & 수정 버튼 보여야 함\r\n  // ! : Auth 데이터가 어떻게 도착하는지 보고 반영하기\r\n  return (\r\n    <S.CommentItem>\r\n      <S.DelBtn onClick={deleteHandler} />\r\n      {!onEdit && <S.EditBtn onClick={() => setOnEdit(true)} />}\r\n      {onEdit && <S.SubmitBtn onClick={onSubmitHandler} />}\r\n      {onEdit ? (\r\n        <form>\r\n          <textarea ref={CommentRef} value={editText} onChange={onChangeHandler} />\r\n        </form>\r\n      ) : (\r\n        <p>{editText}</p>\r\n      )}\r\n      {/* 본인의 페이지 일 때는 표시하지 않기 */}\r\n      <S.LinkIcon onClick={onClickHandler} />\r\n      <S.CommentUser>\r\n        <span>{date}</span>\r\n        <S.ImgBox>\r\n          <img src={data.userProfileImg || data.writerProfileImg} />\r\n        </S.ImgBox>\r\n        <p>{data.writerName}</p>\r\n      </S.CommentUser>\r\n    </S.CommentItem>\r\n  );\r\n};\r\n\r\nexport default CommentItem;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}