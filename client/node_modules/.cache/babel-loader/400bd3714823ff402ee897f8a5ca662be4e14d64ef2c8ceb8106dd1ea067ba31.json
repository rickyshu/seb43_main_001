{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar lodash_1 = require(\"lodash\");\nvar BaseModule_1 = require(\"./BaseModule\");\n/**\r\n * Enables resize of image by dragging the corners of an image\r\n *\r\n * @export\r\n * @class Resize\r\n * @extends {BaseModule}\r\n */\nvar Resize = /** @class */function (_super) {\n  __extends(Resize, _super);\n  function Resize(resize) {\n    var _this = _super.call(this, resize) || this;\n    _this.listeners = {\n      onMouseDown: _this.onMouseDown(),\n      onMouseDrag: _this.onMouseDrag(),\n      onMouseRelease: _this.onMouseRelease()\n    };\n    return _this;\n  }\n  Resize.prototype.onMouseDown = function () {\n    var self = this;\n    return function (event) {\n      // Create the box for resizing\n      self.resizeBox = event.target;\n      self.clickPosition = event.clientX;\n      self.originalWidth = self.img.width || self.img.naturalWidth;\n      self.setCursorStyle(self.resizeBox.style.cursor);\n      document.addEventListener('mousemove', self.listeners.onMouseDrag);\n      document.addEventListener('mouseup', self.listeners.onMouseRelease);\n    };\n  };\n  Resize.prototype.onMouseDrag = function () {\n    var self = this;\n    return function (event) {\n      if (!self.img) return;\n      var deltaX = event.clientX - self.clickPosition;\n      // Left-size resize handler - shrink image\n      if (self.resizeBox === self.boxes[0] || self.resizeBox === self.boxes[3]) self.img.width = Math.round(self.originalWidth - deltaX);else self.img.width = Math.round(self.originalWidth + deltaX);\n      self.imageResize.onUpdate();\n    };\n  };\n  Resize.prototype.onMouseRelease = function () {\n    var self = this;\n    return function (event) {\n      self.setCursorStyle('');\n      document.removeEventListener('mousemove', self.listeners.onMouseDrag);\n      document.removeEventListener('mouseup', self.listeners.onMouseRelease);\n    };\n  };\n  Resize.prototype.createBox = function (cursorType) {\n    var box = document.createElement('div');\n    var self = this;\n    lodash_1.assign(box.style, this.options.handleStyles);\n    box.style.cursor = cursorType;\n    box.style.width = this.options.handleStyles.width + 'px';\n    box.style.height = this.options.handleStyles.height + 'px';\n    box.addEventListener('mousedown', self.listeners.onMouseDown, false);\n    this.overlay.appendChild(box);\n    return box;\n  };\n  Resize.prototype.positionBoxes = function () {\n    var xOffset = -parseFloat(this.options.handleStyles.width) / 2 + 'px';\n    var yOffset = -parseFloat(this.options.handleStyles.height) / 2 + 'px';\n    this.boxes[0].style.left = xOffset;\n    this.boxes[0].style.top = yOffset;\n    this.boxes[1].style.right = xOffset;\n    this.boxes[1].style.top = yOffset;\n    this.boxes[2].style.right = xOffset;\n    this.boxes[2].style.bottom = yOffset;\n    this.boxes[3].style.left = xOffset;\n    this.boxes[3].style.bottom = yOffset;\n  };\n  Resize.prototype.onCreate = function () {\n    this.boxes = [this.createBox('nwse-resize'), this.createBox('nesw-resize'), this.createBox('nwse-resize'), this.createBox('nesw-resize') // Bottom left\n    ];\n\n    this.positionBoxes();\n  };\n  Resize.prototype.onDestroy = function () {\n    this.setCursorStyle('');\n  };\n  Resize.prototype.onUpdate = function () {};\n  Resize.prototype.setCursorStyle = function (cursorStyle) {\n    document.body.style.cursor = cursorStyle;\n    this.img.style.cursor = cursorStyle;\n  };\n  return Resize;\n}(BaseModule_1.BaseModule);\nexports.Resize = Resize;","map":{"version":3,"names":["lodash_1","require","BaseModule_1","Resize","_super","__extends","resize","_this","call","listeners","onMouseDown","onMouseDrag","onMouseRelease","prototype","self","event","resizeBox","target","clickPosition","clientX","originalWidth","img","width","naturalWidth","setCursorStyle","style","cursor","document","addEventListener","deltaX","boxes","Math","round","imageResize","onUpdate","removeEventListener","createBox","cursorType","box","createElement","assign","options","handleStyles","height","overlay","appendChild","positionBoxes","xOffset","parseFloat","yOffset","left","top","right","bottom","onCreate","onDestroy","cursorStyle","body","BaseModule","exports"],"sources":["../../src/modules/Resize.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}