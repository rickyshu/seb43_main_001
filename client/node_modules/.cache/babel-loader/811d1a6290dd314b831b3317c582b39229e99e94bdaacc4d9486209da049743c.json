{"ast":null,"code":"var _s = $RefreshSig$();\n// react-query\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\n\n// util\nimport { getUserIdFromAccessToken } from '../utils/getUserIdFromAccessToken';\n\n// redux\nimport { useAppSelector } from './reduxHook';\n\n// api\nimport { PortfolioCommentAPI } from '../api/client';\nconst {\n  postPortfolioComment\n} = PortfolioCommentAPI;\nexport const usePostPortfolioComment = portfolioId => {\n  _s();\n  const token = useAppSelector(state => state.login.accessToken);\n  const isLogin = useAppSelector(state => state.login.isLogin);\n\n  // ! 추후에 아래에 추가해야 함!\n  const userId = getUserIdFromAccessToken(isLogin, token);\n  const queryClient = useQueryClient();\n  const {\n    mutate: postComment\n  } = useMutation({\n    mutationFn: postPortfolioComment,\n    onSuccess: () => {\n      queryClient.invalidateQueries(['comment', portfolioId], {\n        exact: true\n      });\n    },\n    onError: error => {\n      // *: error 헨들링 하기\n      console.log(error);\n    }\n  });\n  const postCommentAction = (portfolioId, content) => {\n    if (userId === undefined) {\n      alert('로그인 하세요!');\n    } else {\n      postComment({\n        userId: 1,\n        portfolioId,\n        content\n      });\n    }\n  };\n  return {\n    postCommentAction\n  };\n};\n_s(usePostPortfolioComment, \"0a9DcKtPRpLx4vcWywlRT7C5GG4=\", false, function () {\n  return [useAppSelector, useAppSelector, useQueryClient, useMutation];\n});","map":{"version":3,"names":["useMutation","useQueryClient","getUserIdFromAccessToken","useAppSelector","PortfolioCommentAPI","postPortfolioComment","usePostPortfolioComment","portfolioId","_s","token","state","login","accessToken","isLogin","userId","queryClient","mutate","postComment","mutationFn","onSuccess","invalidateQueries","exact","onError","error","console","log","postCommentAction","content","undefined","alert"],"sources":["D:/Users/hoinlee/Desktop/HOIN/codestates/main-project/seb43_main_001/client/src/hooks/usePostPortfolioComment.ts"],"sourcesContent":["// react-query\r\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\r\n\r\n// util\r\nimport { getUserIdFromAccessToken } from '../utils/getUserIdFromAccessToken';\r\n\r\n// redux\r\nimport { useAppSelector } from './reduxHook';\r\n\r\n// api\r\nimport { PortfolioCommentAPI } from '../api/client';\r\n\r\nconst { postPortfolioComment } = PortfolioCommentAPI;\r\n\r\nexport const usePostPortfolioComment = (portfolioId: number) => {\r\n  const token = useAppSelector((state) => state.login.accessToken);\r\n  const isLogin = useAppSelector((state) => state.login.isLogin);\r\n\r\n  // ! 추후에 아래에 추가해야 함!\r\n  const userId = getUserIdFromAccessToken(isLogin, token);\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const { mutate: postComment } = useMutation({\r\n    mutationFn: postPortfolioComment,\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['comment', portfolioId], { exact: true });\r\n    },\r\n    onError: (error) => {\r\n      // *: error 헨들링 하기\r\n      console.log(error);\r\n    },\r\n  });\r\n  const postCommentAction = (portfolioId: number, content: string) => {\r\n    if (userId === undefined) {\r\n      alert('로그인 하세요!');\r\n    } else {\r\n      postComment({ userId: 1, portfolioId, content });\r\n    }\r\n  };\r\n  return { postCommentAction };\r\n};\r\n"],"mappings":";AAAA;AACA,SAASA,WAAW,EAAEC,cAAc,QAAQ,uBAAuB;;AAEnE;AACA,SAASC,wBAAwB,QAAQ,mCAAmC;;AAE5E;AACA,SAASC,cAAc,QAAQ,aAAa;;AAE5C;AACA,SAASC,mBAAmB,QAAQ,eAAe;AAEnD,MAAM;EAAEC;AAAqB,CAAC,GAAGD,mBAAmB;AAEpD,OAAO,MAAME,uBAAuB,GAAIC,WAAmB,IAAK;EAAAC,EAAA;EAC9D,MAAMC,KAAK,GAAGN,cAAc,CAAEO,KAAK,IAAKA,KAAK,CAACC,KAAK,CAACC,WAAW,CAAC;EAChE,MAAMC,OAAO,GAAGV,cAAc,CAAEO,KAAK,IAAKA,KAAK,CAACC,KAAK,CAACE,OAAO,CAAC;;EAE9D;EACA,MAAMC,MAAM,GAAGZ,wBAAwB,CAACW,OAAO,EAAEJ,KAAK,CAAC;EAEvD,MAAMM,WAAW,GAAGd,cAAc,CAAC,CAAC;EAEpC,MAAM;IAAEe,MAAM,EAAEC;EAAY,CAAC,GAAGjB,WAAW,CAAC;IAC1CkB,UAAU,EAAEb,oBAAoB;IAChCc,SAAS,EAAEA,CAAA,KAAM;MACfJ,WAAW,CAACK,iBAAiB,CAAC,CAAC,SAAS,EAAEb,WAAW,CAAC,EAAE;QAAEc,KAAK,EAAE;MAAK,CAAC,CAAC;IAC1E,CAAC;IACDC,OAAO,EAAGC,KAAK,IAAK;MAClB;MACAC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB;EACF,CAAC,CAAC;EACF,MAAMG,iBAAiB,GAAGA,CAACnB,WAAmB,EAAEoB,OAAe,KAAK;IAClE,IAAIb,MAAM,KAAKc,SAAS,EAAE;MACxBC,KAAK,CAAC,UAAU,CAAC;IACnB,CAAC,MAAM;MACLZ,WAAW,CAAC;QAAEH,MAAM,EAAE,CAAC;QAAEP,WAAW;QAAEoB;MAAQ,CAAC,CAAC;IAClD;EACF,CAAC;EACD,OAAO;IAAED;EAAkB,CAAC;AAC9B,CAAC;AAAClB,EAAA,CA3BWF,uBAAuB;EAAA,QACpBH,cAAc,EACZA,cAAc,EAKVF,cAAc,EAEFD,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}