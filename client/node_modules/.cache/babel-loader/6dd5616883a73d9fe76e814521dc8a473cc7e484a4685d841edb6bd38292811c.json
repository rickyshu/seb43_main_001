{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar lodash_1 = require(\"lodash\");\nvar Quill = require(\"quill\");\nvar BaseModule_1 = require(\"./BaseModule\");\nvar IconAlignCenter = require(\"quill/assets/icons/align-center.svg\");\nvar IconAlignLeft = require(\"quill/assets/icons/align-left.svg\");\nvar IconAlignRight = require(\"quill/assets/icons/align-right.svg\");\nvar Parchment = Quill.import('parchment');\nvar FloatStyle = new Parchment.Attributor.Style('float', 'float');\nvar MarginStyle = new Parchment.Attributor.Style('margin', 'margin');\nvar DisplayStyle = new Parchment.Attributor.Style('display', 'display');\n/**\r\n * Appends a simple toolbar to images, for aligning an image left, center, or right\r\n *\r\n * @export\r\n * @class Toolbar\r\n * @extends {BaseModule}\r\n */\nvar Toolbar = /** @class */function (_super) {\n  __extends(Toolbar, _super);\n  function Toolbar() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Toolbar.prototype.onCreate = function () {\n    this.toolbarElement = document.createElement('div');\n    lodash_1.assign(this.toolbarElement.style, this.options.toolbarStyles);\n    this.overlay.appendChild(this.toolbarElement);\n    this.createToolbarButtons();\n  };\n  /**\r\n   * Creates Toolbar buttons to display when an image is \"active\"\r\n   *\r\n   * @private\r\n   *\r\n   * @memberof Toolbar\r\n   */\n  Toolbar.prototype.createToolbarButtons = function () {\n    var buttons = [];\n    var self = this;\n    var alignments = this.createAlignments();\n    var _loop_1 = function (i) {\n      var toolbarButton = document.createElement('span');\n      toolbarButton.innerHTML = alignments[i].icon;\n      toolbarButton.addEventListener('click', function (event) {\n        buttons.forEach(function (button) {\n          return button.style.filter = '';\n        });\n        if (alignments[i].isApplied()) {\n          FloatStyle.remove(self.img);\n          MarginStyle.remove(self.img);\n          DisplayStyle.remove(self.img);\n          // Important to reset already assigned class\n          self.img.className = '';\n        } else {\n          // Important to reset already assigned class, preventing multiple classes to be assigned to the image, before applying a new style\n          self.img.className = '';\n          this.style.filter = 'invert(20%)';\n          alignments[i].apply();\n        }\n        self.imageResize.onUpdate();\n      });\n      lodash_1.assign(toolbarButton.style, this_1.options.toolbarButtonStyles);\n      if (i > 0) toolbarButton.style.borderLeftWidth = '0';\n      lodash_1.assign(toolbarButton.children[0].style, this_1.options.toolbarButtonSvgStyles);\n      if (alignments[i].isApplied()) toolbarButton.style.filter = 'invert(20%)';\n      buttons.push(toolbarButton);\n      this_1.toolbarElement.appendChild(toolbarButton);\n    };\n    var this_1 = this;\n    for (var i = 0; i < alignments.length; ++i) {\n      _loop_1(i);\n    }\n  };\n  /**\r\n   * Create the different alignment styles when the different alignment buttons are activated\r\n   *\r\n   * @private\r\n   * @returns\r\n   *\r\n   * @memberof Toolbar\r\n   */\n  Toolbar.prototype.createAlignments = function () {\n    var _this = this;\n    var left = {\n      icon: IconAlignLeft,\n      apply: function () {\n        FloatStyle.add(_this.img, 'left');\n        MarginStyle.add(_this.img, '0 1em 1em 0');\n        DisplayStyle.add(_this.img, 'inline');\n        _this.img.classList.add('quill-align-left');\n      },\n      isApplied: function () {\n        return _this.img.classList.contains('quill-align-left');\n      }\n    };\n    var center = {\n      icon: IconAlignCenter,\n      apply: function () {\n        FloatStyle.remove(_this.img);\n        MarginStyle.add(_this.img, 'auto');\n        DisplayStyle.add(_this.img, 'block');\n        _this.img.classList.add('quill-align-center');\n      },\n      isApplied: function () {\n        return _this.img.classList.contains('quill-align-center');\n      }\n    };\n    var right = {\n      icon: IconAlignRight,\n      apply: function () {\n        FloatStyle.add(_this.img, 'right');\n        MarginStyle.add(_this.img, '0 0 1em 1em');\n        DisplayStyle.add(_this.img, 'inline');\n        _this.img.classList.add('quill-align-right');\n      },\n      isApplied: function () {\n        return _this.img.classList.contains('quill-align-right');\n      }\n    };\n    return [left, center, right];\n  };\n  Toolbar.prototype.onDestroy = function () {\n    // Doesn't require implementation\n  };\n  Toolbar.prototype.onUpdate = function () {\n    // Doesn't require implementation\n  };\n  return Toolbar;\n}(BaseModule_1.BaseModule);\nexports.Toolbar = Toolbar;","map":{"version":3,"names":["lodash_1","require","Quill","BaseModule_1","IconAlignCenter","IconAlignLeft","IconAlignRight","Parchment","import","FloatStyle","Attributor","Style","MarginStyle","DisplayStyle","Toolbar","_super","__extends","prototype","onCreate","toolbarElement","document","createElement","assign","style","options","toolbarStyles","overlay","appendChild","createToolbarButtons","buttons","self","alignments","createAlignments","i","toolbarButton","innerHTML","icon","addEventListener","event","forEach","button","filter","isApplied","remove","img","className","apply","imageResize","onUpdate","this_1","toolbarButtonStyles","borderLeftWidth","children","toolbarButtonSvgStyles","push","length","_this","left","add","classList","contains","center","right","onDestroy","BaseModule","exports"],"sources":["../../src/modules/Toolbar.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}