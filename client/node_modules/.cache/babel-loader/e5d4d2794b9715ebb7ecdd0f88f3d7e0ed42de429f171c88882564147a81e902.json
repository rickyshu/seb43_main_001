{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar lodash_1 = require(\"lodash\");\nvar BaseModule_1 = require(\"./BaseModule\");\n/**\r\n * Display the pixel width&height of an image\r\n *\r\n * @export\r\n * @class DisplaySize\r\n * @extends {BaseModule}\r\n */\nvar DisplaySize = /** @class */function (_super) {\n  __extends(DisplaySize, _super);\n  function DisplaySize() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DisplaySize.prototype.onCreate = function () {\n    this.display = document.createElement('div');\n    lodash_1.assign(this.display.style, this.options.displayStyles);\n    this.overlay.appendChild(this.display);\n  };\n  DisplaySize.prototype.onDestroy = function () {};\n  DisplaySize.prototype.onUpdate = function () {\n    if (!this.display || !this.img) return;\n    var size = this.getCurrentSize();\n    this.display.innerHTML = size.join(' &times; ');\n    if (size[0] > 120 && size[1] > 30) {\n      // Position - top of image\n      this.display.style.right = '4px';\n      this.display.style.bottom = '4px';\n      this.display.style.left = 'auto';\n    } else if (this.img.style['float'] === 'right') {\n      // Position - bottom left\n      var bounds = this.display.getBoundingClientRect();\n      this.display.style.right = 'auto';\n      this.display.style.bottom = bounds.height + 4 + 'px';\n      this.display.style.left = bounds.width + 4 + 'px';\n    } else {\n      // Position - bottom right\n      var bounds = this.display.getBoundingClientRect();\n      this.display.style.right = bounds.width + 4 + 'px';\n      this.display.style.bottom = bounds.height + 4 + 'px';\n      this.display.style.left = 'auto';\n    }\n  };\n  DisplaySize.prototype.getCurrentSize = function () {\n    return [this.img.width, Math.round(this.img.width / this.img.naturalWidth * this.img.naturalHeight)];\n  };\n  return DisplaySize;\n}(BaseModule_1.BaseModule);\nexports.DisplaySize = DisplaySize;","map":{"version":3,"names":["lodash_1","require","BaseModule_1","DisplaySize","_super","__extends","prototype","onCreate","display","document","createElement","assign","style","options","displayStyles","overlay","appendChild","onDestroy","onUpdate","img","size","getCurrentSize","innerHTML","join","right","bottom","left","bounds","getBoundingClientRect","height","width","Math","round","naturalWidth","naturalHeight","BaseModule","exports"],"sources":["../../src/modules/DisplaySize.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA;;;;;;;AAOA,IAAAE,WAAA,0BAAAC,MAAA;EAAiCC,SAAA,CAAAF,WAAA,EAAAC,MAAA;EAAjC,SAAAD,YAAA;;EAqDA;EAjDWA,WAAA,CAAAG,SAAA,CAAAC,QAAQ,GAAf;IACI,IAAI,CAACC,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAE5CV,QAAA,CAAAW,MAAM,CAAC,IAAI,CAACH,OAAO,CAACI,KAAK,EAAE,IAAI,CAACC,OAAO,CAACC,aAAa,CAAC;IAEtD,IAAI,CAACC,OAAO,CAACC,WAAW,CAAC,IAAI,CAACR,OAAO,CAAC;EAC1C,CAAC;EAEML,WAAA,CAAAG,SAAA,CAAAW,SAAS,GAAhB,aAEA,CAAC;EAEMd,WAAA,CAAAG,SAAA,CAAAY,QAAQ,GAAf;IACI,IAAI,CAAC,IAAI,CAACV,OAAO,IAAI,CAAC,IAAI,CAACW,GAAG,EAC1B;IAEJ,IAAMC,IAAI,GAAG,IAAI,CAACC,cAAc,EAAE;IAClC,IAAI,CAACb,OAAO,CAACc,SAAS,GAAGF,IAAI,CAACG,IAAI,CAAC,WAAW,CAAC;IAE/C,IAAIH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,IAAIA,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,EAAE;MAC/B;MACA,IAAI,CAACZ,OAAO,CAACI,KAAK,CAACY,KAAK,GAAG,KAAK;MAChC,IAAI,CAAChB,OAAO,CAACI,KAAK,CAACa,MAAM,GAAG,KAAK;MACjC,IAAI,CAACjB,OAAO,CAACI,KAAK,CAACc,IAAI,GAAG,MAAM;IACpC,CAAC,MACI,IAAI,IAAI,CAACP,GAAG,CAACP,KAAK,CAAC,OAAO,CAAC,KAAK,OAAO,EAAE;MAC1C;MACA,IAAMe,MAAM,GAAG,IAAI,CAACnB,OAAO,CAACoB,qBAAqB,EAAE;MACnD,IAAI,CAACpB,OAAO,CAACI,KAAK,CAACY,KAAK,GAAG,MAAM;MACjC,IAAI,CAAChB,OAAO,CAACI,KAAK,CAACa,MAAM,GAAIE,MAAM,CAACE,MAAM,GAAG,CAAC,GAAI,IAAI;MACtD,IAAI,CAACrB,OAAO,CAACI,KAAK,CAACc,IAAI,GAAIC,MAAM,CAACG,KAAK,GAAG,CAAC,GAAI,IAAI;IACvD,CAAC,MACI;MACD;MACA,IAAMH,MAAM,GAAG,IAAI,CAACnB,OAAO,CAACoB,qBAAqB,EAAE;MACnD,IAAI,CAACpB,OAAO,CAACI,KAAK,CAACY,KAAK,GAAIG,MAAM,CAACG,KAAK,GAAG,CAAC,GAAI,IAAI;MACpD,IAAI,CAACtB,OAAO,CAACI,KAAK,CAACa,MAAM,GAAIE,MAAM,CAACE,MAAM,GAAG,CAAC,GAAI,IAAI;MACtD,IAAI,CAACrB,OAAO,CAACI,KAAK,CAACc,IAAI,GAAG,MAAM;IACpC;EACJ,CAAC;EAEOvB,WAAA,CAAAG,SAAA,CAAAe,cAAc,GAAtB;IACI,OAAO,CACH,IAAI,CAACF,GAAG,CAACW,KAAK,EACdC,IAAI,CAACC,KAAK,CAAE,IAAI,CAACb,GAAG,CAACW,KAAK,GAAG,IAAI,CAACX,GAAG,CAACc,YAAY,GAAI,IAAI,CAACd,GAAG,CAACe,aAAa,CAAC,CAChF;EACL,CAAC;EAGL,OAAA/B,WAAC;AAAD,CAAC,CArDgCD,YAAA,CAAAiC,UAAU;AAA9BC,OAAA,CAAAjC,WAAA,GAAAA,WAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}